import{_ as h,r as u,o as v,a as _,c as b,b as o,u as y,l as x,t as $,w as k,d as w,v as S,e as j,f as T,S as r}from"./index-DK9EypC2.js";const A={class:"contenedor-login"},C={class:"lado-izquierdo"},I=["src"],N={class:"lado-derecho"},D={class:"formulario"},M={class:"reloj"},z={class:"campo"},B={__name:"CheckIn",setup(E){const p=j(),m=()=>{p.push("/login")},s=u(""),i=u(""),g=t=>t.charAt(0).toUpperCase()+t.slice(1),c=()=>{const t=new Date,e=t.toLocaleDateString("es-MX",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),n=t.toLocaleTimeString("es-MX",{hour:"2-digit",minute:"2-digit",second:"2-digit"});i.value=`${g(e)}
üïí ${n}`};let l;v(()=>{c(),l=setInterval(c,1e3)}),_(()=>{clearInterval(l)});const f=async()=>{if(s.value){try{fetch("http://localhost:8080/backend/public/api/gym/actualizar-dias-restantes",{method:"GET"}).catch(()=>{});const t=await fetch("http://localhost:8080/backend/public/api/gym/acceso",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({telefono:s.value})}),e=await t.json();if(!t.ok){r.fire({icon:"error",title:"Cliente no encontrado",text:"No se encontr√≥ un cliente con ese tel√©fono."});return}if(!e.acceso)r.fire({icon:"error",title:"Acceso denegado",text:e.mensaje||"Acceso denegado"});else{let n="success",d="¬°Acceso aprobado!",a=e.dias_restantes;a<=5&&(n="warning",d="¬°Atenci√≥n!"),r.fire({icon:n,title:d,html:`
          <p>${a<=5?`Tu membres√≠a est√° por vencer. Faltan <strong>${a} d√≠a(s)</strong>.`:`Faltan <strong>${a} d√≠a(s)</strong> de membres√≠a.`}</p>
          <hr/>
          <p><strong>Plan:</strong> ${e.paquete||""}</p>
          ${e.promocion?`<p><strong>Promoci√≥n:</strong> ${e.promocion}</p>`:""}
          ${e.descuento?`<p><strong>Descuento:</strong> ${Number(e.descuento).toFixed(2)}%</p>`:""}
        `})}}catch{r.fire({icon:"error",title:"Error de conexi√≥n",text:"No se pudo conectar al servidor."})}s.value=""}};return(t,e)=>(T(),b("div",A,[o("span",{class:"material-icons casita",onClick:m,title:"Volver al inicio"},"home"),o("div",C,[o("img",{src:y(x),alt:"Logo",class:"logo"},null,8,I)]),o("div",N,[o("div",D,[e[3]||(e[3]=o("h2",null,"Bienvenido",-1)),o("p",M,$(i.value),1),o("form",{onSubmit:k(f,["prevent"])},[o("div",z,[e[1]||(e[1]=o("label",{for:"telefono"},"N√∫mero de tel√©fono",-1)),w(o("input",{type:"text",id:"telefono","onUpdate:modelValue":e[0]||(e[0]=n=>s.value=n),required:"",maxlength:"10",placeholder:"Ej. 9510000000"},null,512),[[S,s.value]])]),e[2]||(e[2]=o("button",{type:"submit"},"Ingresar",-1))],32)])])]))}},q=h(B,[["__scopeId","data-v-27542c8e"]]);export{q as default};
